# 人民城轨2.0 - 功能需求文档 (FRD)

**版本**: v1.0
**日期**: 2023-10-27
**负责人**: [产品经理姓名]

> 本文档旨在详细定义“人民城轨2.0”产品的功能需求，包括APP端和运营平台两大部分。本文档将作为研发、测试和设计团队的工作依据，确保各方对产品功能有统一、清晰的理解。

---

## 一、 APP端

### 1. 核心算法

1.  **个性化推荐算法**:
    *   **推荐依据**: 综合运用`用户行为`、`作品权重`和`临时推荐策略`，为用户推荐个性化的视频流。
    *   **用户行为分析**: 实时分析用户的完播率、停留时间、点赞、评论、搜索、关注、分享等行为，动态调整用户兴趣标签得分。
    *   **作品权重模型**: 根据作品的互动数据（点赞、评论、分享）、时效性、原创性等因素，为内容设置不同权重。
2.  **视频预加载机制**:
    *   **目标**: 降低视频首次加载时间，提升用户滑动浏览的流畅体验。
    *   **实现**: 在用户观看当前视频时，提前对推荐列表中的下一个视频进行缓存。

### 2. 核心功能

#### 2.1. 关注
1.  **关注列表**: “关注”页仅展示已关注用户发布的视频内容。
2.  **排序规则**: 优先展示未观看的最新视频，其次按发布时间倒序排列已看视频。
3.  **空状态引导**: 当用户未关注任何人时，页面将提示“当前没有关注的人，快去关注吧”，并引导用户去发现创作者。

#### 2.2. 协会
1.  **协会视频列表**: 聚合展示所有通过协会认证账号发布的视频内容。

#### 2.3. 展会
1.  **展会视频列表**: 聚合展示所有与特定展会相关的视频内容。
2.  **展位导览**: 提供展会展位信息查询与电子导览图功能。
3.  **论坛直播 (对接微赞)**:
    *   **频道列表**: 展示所有直播频道，包含频道封面和名称。
    *   **直播列表**: 展示频道下的直播活动（区分“直播中”、“预告”状态）。
4.  **录播回放 (对接微赞)**:
    *   **频道列表**: 展示提供回放内容的频道。
    *   **视频列表**: 展示频道下的录播视频，包含封面和标题。
5.  **用户数据对接**: 用户在APP内观看直播时，需判断并传递登录状态，以实现与微赞直播的用户体系打通。

#### 2.4. 内容发布
1.  **发布类型**: 支持发布`图文`和`视频`两种格式。
2.  **内容来源**: 支持通过`即时拍摄`或`本地上传`方式创建内容。
3.  **图文设置**: 允许用户在发布图文时，自定义图片轮播的切换时间。
4.  **发布板块选择**: 用户发布内容时，必须选择一个发布板块，如 `协会发布`、`行业发布`、`展会发布` 等。

### 3. 基础交互与模块

#### 3.1. 视频播放页
*   **通用交互**: 所有视频（无论在哪个模块）的播放界面均需支持`关注`、`点赞`、`评论`、`分享`和`推荐`操作。
*   **评论审核**: 用户发布的所有评论，在显示前需经过AI进行合规性审查。

#### 3.2. 智能对话助手
*   保留基础的智能对话助手功能，允许用户查看历史对话记录，并能创建新的对话。

#### 3.3. 消息中心
*   **系统消息**: 集中展示官方发送的各类系统级通知，例如：产品更新公告、服务维护通知、内容审核结果（通过/失败）等。

#### 3.4. 我的
1.  **个人信息管理**: 查看和编辑头像、昵称等基础个人资料。
2.  **作品管理**: 提供`我的作品`、`我的推荐`、`我的点赞`等列表，方便用户管理与自己相关的内容。
3.  **系统设置**:
    *   **账号与安全**: 支持手机号变更、密码修改。
    *   **通用设置**: 包括`意见反馈`入口、`关于我们`页面。
    *   **退出登录**: 提供安全的退出登录功能。
4.  **注册与登录**:
    *   **登录方式**: 支持`短信验证码登录`和`密码登录`。
    *   **新用户引导**: 用户首次注册登录时，需引导其选择至少5个感兴趣的内容标签，用于初始化推荐模型。

#### 3.5. 搜索
1.  **搜索服务架构**: 采用微服务架构，独立部署内容搜索服务。
2.  **搜索范围**: 支持对`视频`、`图文`、`用户`进行综合搜索。
3.  **搜索逻辑**: 搜索结果的排序依据`作品标签`、`作品描述`、`用户昵称/简介`的匹配度综合计算。
4.  **结果分类展示**: 搜索结果页采用标签页形式，分类展示`综合`、`视频`、`图文`、`用户`的搜索结果。
5.  **交互流程**: 在搜索结果列表点击任一作品，进入该作品的播放页；点击返回按钮，应能平滑地返回到之前的搜索结果列表页面。

---

## 二、 运营平台

### 1. 系统首页
1.  **核心数据概览**: 实时展示平台核心运营指标，如：新增用户数、日活跃用户（DAU）、内容发布量、总互动数（点赞、评论、分享）。
2.  **待办事项提醒**: 集中展示待处理任务，如：待审核内容数量、待处理用户反馈、系统异常警报等。
3.  **数据趋势图表**: 以图表形式展示关键数据在近期（如7日、30日）的变化趋势。
4.  **热门内容排行**: 展示近期热门视频、图文和热门用户榜单。

### 2. 内容管理
1.  **内容列表与检索**: 支持按内容类型（视频、图文）、发布者、发布时间、审核状态等多维度筛选和搜索平台所有内容。
2.  **内容详情查看**: 查看单个内容的详细信息，包括发布者信息、内容数据（播放量、点赞、评论）、审核记录等。
3.  **内容状态管理**: 支持对内容进行手动上架、下架、推荐、置顶、删除等操作。
4.  **评论管理**: 查看、搜索、删除用户发布的评论内容。

### 3. AI审核
1.  **图文审核**：对接第三方服务，检测用户发布图文中的敏感词（如政治、色情、广告违规词汇）以及图片中的违禁元素（如不良场景、水印），提供实时检测接口和记录。
2.  **视频审核**：对接第三方服务，支持视频的抽帧画面检测、音频中的违规语音识别、字幕文本的语义分析，采用异步检测并记录结果，支持自动或手动下架违规视频。
3.  **直播审核**：对平台内的实时直播内容进行多维度的监控与审核，包括实时画面监控、音频内容监控、互动内容审核、直播间状态管理。
4.  **互动审核**：自动检测用户评论、私信和分享文案中的违规内容。
5.  **协会发布审核**：对接钉钉审批流程，并记录审核流程的各节点状态。
6.  **会展视频内容审核**：发布到“展会”模块的视频，需要经过指定的会展公司人员进行人工审核。审核任务将通过APP推送给指定人员，审核通过后的视频才可正式发布。
7.  **人工复审机制**：所有经AI自动审核的内容（包括图文、视频、互动评论等）均需进入人工复审环节。后台提供统一的复审管理界面，同时支持在APP端向指定审核人员推送复审任务，并允许其直接在APP内进行“通过”或“驳回”操作。

### 4. 审核流程管理
1.  **流程模板管理**: 支持针对不同内容类型（如图文、视频、评论）创建和配置多级审核流程，例如配置为“AI初审 -> 人工初审 -> 人工复审”或“AI初审 -> 人工复审”等。
2.  **审核节点指派**: 在流程模板中，可为每个“人工审核”节点指定负责的审核角色（如：初级审核员、高级审核员、协会审核组）。
3.  **流程启用规则**: 支持设置流程的触发条件，例如可以规定“协会发布”板块的内容自动应用A流程，“展会发布”板块的内容自动应用B流程。
4.  **全局复审开关**: 提供一个总开关，可一键要求所有发布内容在AI审核后必须进入人工复审环节，以应对特殊时期的监管要求。

### 5. 用户行为统计
1.  **基础行为数据采集**:
    *   页面浏览记录（首页、关注页、企业宣传页等访问轨迹）。
    *   交互行为（点赞、评论、分享、收藏、关注操作日志）。
    *   发布行为（图文/视频发布时间、频率、内容类型）。
    *   视频播放数据（播放时长、完播率）。
    *   搜索行为（关键词、搜索频次）。

### 6. 作品浏览、点赞、评论、推荐等数据统计
1.  **内容效果指标**:
    *   **基础数据**: 统计作品的点赞量、评论量、分享量等。
    *   **视频数据**: 统计视频的播放量、完播率等。
2.  **数据可视化**:
    *   **核心看板**: 以标签维度分类，展示热门作品榜单及当日关键数据统计。
    *   **分模块展示**: 按发布板块（行业用户、展会用户、协会用户）分类，展示各板块的内容分布与数据统计。

### 7. 用户画像分析
1.  **基础属性标签**：基于用户注册信息，生成企业所属行业、企业规模、认证状态等静态信息标签。
2.  **行为标签**：根据用户长期行为数据动态生成标签，包括高频访问模块、内容偏好、活跃时段等。
3.  **智能分群**：支持运营人员基于用户画像标签进行灵活的用户分群管理，用于精准营销和个性化服务。
4.  **标签体系管理**：提供完整的用户标签管理功能，支持标签的创建、编辑、删除和权重调整。

### 8. 平台流量分配配置
1.  **推荐算法配置**:
    *   **权重因子调整**：提供后台界面，允许运营人员调整推荐算法中各项权重因子（如用户行为、内容热度、时间衰减等）对推荐结果的影响。
    *   **分模块规则**：支持为不同模块（如首页推荐、展会页）配置差异化的推荐逻辑。

### 9. 日活、月活等统计
1.  **核心指标**:
    *   **用户活跃度**：提供DAU（日活跃用户）、WAU（周活跃用户）、MAU（月活跃用户）的统计与趋势图。
    *   **行为活跃度**：提供人均使用时长、会话次数等指标的统计。

### 10. 用户管理
1.  **信息与权限管理**:
    *   **基础信息管理**：支持查看与管理用户的企业信息。
    *   **权限分级**：支持为不同类型的用户配置不同的功能权限。
    *   **用户身份管理**：支持通过批量导入的方式设定或变更用户身份（普通用户、展会用户、协会用户）。
2.  **组织结构**:
    *   **分组管理**：支持按用户身份（普通用户、参展单位、协会）对用户进行分组管理。
    *   **协会内部架构**：支持为协会类型的用户创建和管理内部的部门/层级结构。
3.  **账号状态管理**:
    *   **账号控制**：支持对违规账号进行`封禁`、`解禁`等操作，并提供异常登录检测功能。
    *   **行为管理**：记录用户的违规历史，建立高风险用户档案。

### 11. 管理员与权限管理
1.  **登录与认证**: 提供后台系统安全登录入口，支持账号密码登录，并集成验证码等安全机制。
2.  **个人中心**: 后台管理员可修改个人登录密码、查看个人操作日志。
3.  **角色管理 (RBAC)**: 支持创建、编辑、删除不同的管理员角色（如：运营、审核、管理员），并为角色配置精细化的菜单和操作权限。
4.  **管理员列表**: 管理后台系统所有管理员账号，支持新增管理员、分配角色、禁用/启用账号。

### 12. 消息管理
1.  **APP系统消息推送**:
    *   **消息创建**: 支持创建系统消息、审核消息、活动消息、安全提醒等多类型消息。
    *   **推送目标**: 支持`全员推送`、`按用户分群推送`、`单用户推送`等多种目标选择方式。
    *   **推送数据**: 统计推送量、到达率、阅读率、点击率等关键效果指标。
2.  **消息模板管理**:
    *   **模板创建/编辑**: 支持创建和编辑消息模板，可使用变量以实现个性化内容。
    *   **模板管理**: 支持按消息类型对模板进行分类管理和复用。
3.  **定时推送功能**:
    *   **计划任务**: 支持设置消息的未来发送时间，实现定时或延时推送。
    *   **任务管理**: 提供定时推送任务列表，可查看和管理所有待执行的任务。

### 13. 用户反馈管理
1.  **反馈列表**: 集中展示所有用户通过APP提交的反馈意见，包含反馈用户、联系方式、反馈时间、反馈内容。
2.  **状态处理**: 支持对反馈进行状态标记（如：待处理、处理中、已解决），并可记录处理结果。
3.  **快捷回复**: 支持使用预设模板快速回复用户反馈。

### 14. APP版本管理
1.  **版本列表**: 展示所有历史APP版本信息，包括版本号、更新说明、发布时间、安装包大小等。
2.  **新版本发布**: 支持上传新的APP安装包（Android/iOS），并配置该版本的更新信息。
3.  **更新策略配置**: 支持配置`强制更新`、`非强制更新`（提示更新）、`灰度发布`等多种更新策略。
4.  **发布状态管理**: 支持对线上版本进行`上架`或`下架`操作。

### 15. 展位管理
1.  **场馆信息管理**:
    *   **场馆基础信息**：维护场馆名称、地址、描述等基本信息。
    *   **场馆状态管理**：设置和管理场馆的使用状态。
2.  **楼层分区配置**:
    *   **楼层信息**：管理楼层名称、描述等信息。
    *   **分区划分**：在楼层内进行展区的划分和配置。
    *   **展位图**：上传和管理楼层的展位平面图。
3.  **参展公司数据管理**:
    *   **公司信息**：管理参展公司的名称、描述、联系方式等。
    *   **展位分配**：为参展公司分配具体的展位位置。
    *   **APP账号关联**：将参展公司与APP内的用户账号进行关联。

### 16. 运营数据管理
1.  **资源使用监控**:
    *   提供仪表盘，实时查看服务器的CPU、内存使用率、存储空间占用情况及应用的带宽使用情况。
2.  **资源消耗统计**:
    *   按日、周、月维度统计资源消耗，提供趋势分析功能，并能下钻统计到每个用户的作品量、资源占用量等数据。
3.  **警报和阈值设置**:
    *   支持设置内存、存储和带宽的使用阈值，当资源使用超出设定阈值时，自动触发警报。
4.  **企业级数据管理**:
    *   **数据导入/导出**：支持用户数据、内容数据的批量导入和导出。
    *   **数据备份/恢复**：提供完整的数据备份和一键恢复机制。
    *   **数据清理**：提供定期数据清理和数据库优化功能。

### 17. 直播管理
1.  **频道管理**：维护APP中展示的直播频道列表，包括频道名称、封面、简介等。
2.  **直播管理**：管理特定频道下的直播活动，包括直播标题、封面、计划开播时间，并能同步“微赞”的直播状态。
3.  **直播回放管理**：管理直播结束后由“微赞”生成的回放视频，支持配置回放视频的标题、封面。
4.  **用户数据对接**：确保在APP内跳转至直播间时，能正确传递用户登录状态。

### 18. 日志管理（等保三级合规）
1.  **安全审计日志**:
    *   全面记录后台系统的`登录登出`、`权限变更`、`系统配置变更`、`敏感数据访问`及`异常行为`。
2.  **业务操作日志**:
    *   全面记录业务操作，如`内容审核`、`内容发布`、`用户管理`、`消息推送`、`数据导入导出`等。
3.  **系统运行日志**:
    *   全面记录系统运行状态，如`系统性能`、`API调用`、`数据备份恢复`及`系统错误`。
4.  **日志管理功能**:
    *   **查询检索**：提供多维度、高性能的日志查询功能。
    *   **完整性保护**：采用数字签名、哈希校验等技术确保日志数据不被篡改。
    *   **存储与备份**：日志数据至少保存6个月，并提供自动归档、备份和恢复机制。
    *   **访问控制**：严格控制日志访问权限，所有访问行为均被记录。
    *   **实时告警**：对异常日志事件（如批量操作、异常登录）设置告警规则。

---

## 三、 基础框架

1.  **技术栈选型**: 完成前后端基础架构设计与技术选型。
2.  **框架搭建**: 完成项目基础开发框架的搭建工作。
