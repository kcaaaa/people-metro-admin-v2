# 展会报名功能设计 - 展会运营系统

## 1. 功能概述

### 1.1 功能定位
展会报名功能是展会运营模块下的一个核心功能，与展位管理、展商管理等功能平级，旨在提供展会报名管理、报名信息统计、材料导出及反馈通知等功能。

### 1.2 业务目标
- 简化展商报名流程，提高报名效率
- 实现报名信息的集中管理和规范化处理
- 提供多维度的统计分析，支持展会运营决策
- 通过短信通知功能，提升展商服务体验
- 与现有展位管理、展商管理功能无缝集成，形成完整的展会运营闭环
- 实现参展人员信息的全面收集和管理
- 提供参展身份识别和人流量统计功能，提升展会管理智能化水平

### 1.3 核心目标
- 提供独立的展会报名入口配置功能
- 实现报名信息的全面管理和维护
- 支持报名数据统计与分析
- 支持按公司/人名分组导出报名信息及材料
- 支持一键发送反馈短信功能
- 支持参展人员信息收集和材料上传管理
- 为每个报名成功的参展人员生成唯一展商码及二维码
- 提供基于二维码的身份辨别和人流量统计功能

## 2. 功能详情

### 2.1 功能列表

| 功能模块 | 功能点 | 描述 |
|--------|-------|------|
| 报名入口管理 | 配置报名入口 | 配置报名入口的开启/关闭状态、时间范围、显示名称等 |
| 报名信息管理 | 报名信息查看 | 查看所有报名信息，支持搜索、筛选和排序 |
| | 报名信息详情 | 查看单个报名信息的完整详情和提供的材料 |
| | 报名信息编辑 | 编辑报名信息（仅限管理员） |
| | 报名信息删除 | 删除报名信息（带权限控制） |
| 参展人员管理 | 参展人员信息收集 | 收集和管理参展人员的详细信息 |
| | 参展人员信息查看 | 查看参展人员信息列表和详情 |
| | 参展人员信息编辑 | 编辑参展人员信息 |
| 材料管理 | 材料上传 | 支持参展商上传各类证明材料 |
| | 材料预览与下载 | 在线预览和下载上传的材料 |
| 展商码与二维码 | 展商码生成 | 为每个报名成功的参展人员生成唯一展商码 |
| | 二维码生成 | 生成包含展商信息的二维码 |
| | 二维码发送与下载 | 通过短信/邮件发送二维码或提供下载功能 |
| 身份识别 | 二维码扫描验证 | 通过扫描二维码进行参展人员身份验证 |
| | 验证结果展示 | 显示验证结果和相关信息 |
| 人流量统计 | 参展统计 | 统计进入展会的人数和时段分布 |
| | 数据可视化 | 提供人流量数据的图表展示 |
| 数据统计 | 报名统计 | 统计报名人数、公司数量等关键指标 |
| | 统计图表 | 提供可视化的数据统计图表 |
| 导出功能 | 报名信息导出 | 按公司或人名分组导出报名信息 |
| | 材料导出 | 导出报名时提供的材料文件 |
| | 统计数据导出 | 导出统计分析数据 |
| 通知功能 | 短信通知 | 支持根据报名时留下的联系方式一键发送反馈短信 |

### 2.2 详细功能描述

#### 2.2.1 报名入口管理

**功能描述**：
- 管理展会报名入口的开启/关闭状态
- 设置报名开始和结束时间
- 配置报名入口的显示名称
- 配置报名须知等说明信息

**输入**：
- 入口名称
- 状态（开启/关闭）
- 开始时间
- 结束时间
- 报名须知内容

**输出**：
- 保存成功/失败状态
- 更新后的入口配置

**前置条件**：用户需具有管理员权限
**后置条件**：入口状态更新，报名页面根据配置显示/隐藏

#### 2.2.2 报名信息管理

**功能描述**：
- 以表格形式展示所有报名信息
- 支持按公司名称、联系人、状态等条件进行搜索和筛选
- 支持按报名时间等字段排序
- 支持查看单个报名信息的完整详情
- 支持编辑和删除操作（需权限控制）

**输入**：
- 搜索关键词
- 筛选条件
- 编辑表单数据

**输出**：
- 报名信息列表
- 单个报名信息详情
- 操作成功/失败提示

**前置条件**：用户需具有查看/编辑/删除权限
**后置条件**：报名信息更新或删除

**业务规则**：
- 报名信息唯一性校验：同一公司在同一展会期间只能提交一次报名
- 敏感信息处理：联系电话、邮箱等敏感信息在非必要场景下部分隐藏
- 数据权限控制：管理员只能查看和操作其权限范围内的报名信息
- 操作日志记录：对报名信息的所有修改操作需记录操作日志
- 数据时效性：超过展会日期3个月的报名数据自动归档

#### 2.2.3 参展人员管理

**功能描述**：
- 收集参展人员的详细信息，包括姓名、职位、联系方式等
- 支持查看参展人员信息列表，可按公司、姓名等条件筛选
- 支持编辑参展人员信息，确保信息准确性
- 支持为每个参展人员生成唯一标识

**输入**：
- 参展人员姓名
- 职位
- 联系方式
- 所属公司
- 其他相关信息

**输出**：
- 参展人员信息列表
- 单个参展人员详情
- 操作成功/失败提示

**前置条件**：
- 展商已完成报名
- 用户具有查看/编辑权限

**后置条件**：
- 参展人员信息更新或删除

**业务规则**：
- 唯一性校验：同一身份证号/护照号在同一展会期间只能注册一次
- 信息完整性：核心身份信息（姓名、联系方式）为必填项
- 敏感信息保护：身份证号等敏感信息需脱敏处理
- 权限控制：仅管理员和相关展商负责人可编辑参展人员信息

### 2.2.4 材料管理

**功能描述**：
- 支持参展商上传各类证明材料，如公司资质、参展人员身份证明等
- 对上传材料进行分类管理
- 支持在线预览和下载材料
- 记录材料审核状态

**输入**：
- 材料文件
- 材料类型
- 材料描述

**输出**：
- 材料上传状态
- 材料列表
- 预览/下载链接

**前置条件**：
- 展商已完成报名
- 文件类型和大小符合系统要求

**后置条件**：
- 材料上传成功，可在系统中查看

**业务规则**：
- 文件格式限制：支持PDF、JPG、PNG、DOC、DOCX等常见格式
- 文件大小限制：单个文件不超过20MB
- 上传数量限制：根据材料类型设置不同的上传数量限制
- 材料分类：按参展商材料、人员材料等进行分类管理
- 安全措施：上传文件需进行病毒扫描，敏感材料加密存储

### 2.2.5 展商码与二维码管理

**功能描述**：
- 为每个报名成功的参展人员自动生成唯一的展商码
- 根据展商信息生成包含必要数据的二维码
- 提供二维码的下载、打印和通过短信/邮件发送功能
- 支持批量生成和发送二维码

**输入**：
- 参展人员信息
- 发送方式选择（短信/邮件/下载）

**输出**：
- 展商码
- 二维码图片
- 发送状态

**前置条件**：
- 参展人员报名成功且信息完整
- 审核状态为已通过

**后置条件**：
- 展商码和二维码生成成功
- 二维码可通过多种方式获取

**业务规则**：
- 唯一性保障：确保每个展商码和二维码在系统内唯一
- 数据安全：二维码中包含的敏感信息需加密处理
- 有效期管理：可设置二维码的有效期限，默认与展会日期一致
- 防复制机制：可在二维码中添加防伪标识或时效性验证

### 2.2.6 身份识别功能

**功能描述**：
- 通过扫描参展人员二维码进行身份验证
- 实时显示验证结果和参展人员基本信息
- 记录每次验证的时间和地点
- 支持离线验证和联网验证两种模式

**输入**：
- 二维码扫描结果

**输出**：
- 验证结果（通过/拒绝）
- 参展人员基本信息
- 验证时间和位置

**前置条件**：
- 扫描设备正常工作
- 系统与扫描设备连接正常

**后置条件**：
- 验证结果记录到系统
- 可在统计数据中查询验证记录

**业务规则**：
- 验证速度：单次验证响应时间不超过2秒
- 错误处理：扫描失败或二维码无效时给出明确提示
- 权限控制：只有授权人员可使用验证功能
- 数据同步：离线验证数据在网络恢复后自动同步

### 2.2.7 人流量统计

**功能描述**：
- 基于二维码验证记录统计展会入场人数
- 提供按时间段、区域等维度的人流量分析
- 生成人流量统计报表和图表
- 支持实时监测和历史数据查询

**输入**：
- 统计维度选择
- 时间范围选择

**输出**：
- 实时和累计人流量数据
- 统计图表
- 分析报告

**前置条件**：
- 系统有二维码验证记录

**后置条件**：
- 统计结果展示
- 数据可导出和打印

**业务规则**：
- 数据准确性：确保统计结果与实际验证记录一致
- 实时性要求：数据更新延迟不超过5分钟
- 隐私保护：统计数据只显示汇总信息，不泄露个人身份
- 异常监测：对异常人流量波动进行预警

### 2.2.8 数据统计

**功能描述**：
- 统计报名总数、公司总数、参展人数等基础指标
- 提供按时间段、公司类型等维度的统计数据
- 以图表形式展示统计结果（柱状图、饼图等）
- 结合人流量统计数据，提供综合分析报告

**输入**：
- 统计维度选择
- 时间范围选择

**输出**：
- 统计数据
- 可视化图表
- 分析报告

**前置条件**：系统中有报名数据和人流量数据
**后置条件**：展示统计结果

**业务规则**：
- 统计数据准确性：确保统计结果与实际数据一致
- 统计维度多样性：支持按时间、地区、行业等多维度统计
- 数据实时更新：统计数据应定期更新，反映最新情况
- 数据导出：支持将统计结果导出为Excel或PDF格式

#### 2.2.4 导出功能

**功能描述**：
- 支持将报名信息导出为Excel或CSV格式
- 支持按公司或人名进行分组导出
- 支持导出报名时提供的材料文件（打包下载）

**输入**：
- 导出格式选择
- 导出分组方式选择
- 导出范围选择（全部/筛选结果）

**输出**：
- 下载文件（Excel/CSV/ZIP）

**前置条件**：系统中有报名数据
**后置条件**：文件下载到用户本地

**业务规则**：
- 导出数量限制：单次最多导出10000条记录
- 敏感信息处理：导出文件中的敏感信息需脱敏处理
- 导出失败处理：导出过程中出现异常，需给出明确提示
- 导出任务管理：大量数据导出应异步处理，用户可查看导出任务状态

#### 2.2.5 通知功能

**功能描述**：
- 根据报名时留下的联系方式（手机号）批量发送短信
- 支持自定义短信内容模板
- 提供发送记录和状态查询

**输入**：
- 短信模板内容
- 接收者选择（全部/部分）

**输出**：
- 发送成功/失败状态
- 发送记录

**前置条件**：报名信息中包含有效的手机号
**后置条件**：短信发送，状态更新

**业务规则**：
- 发送频率限制：每手机号每分钟最多接收1条短信，每小时最多5条
- 短信内容合规性：禁止发送违法违规内容，系统需进行内容审核
- 短信记录保存：所有短信发送记录需保存，便于追溯
- 失败重试机制：短信发送失败时自动重试3次，间隔30秒
- 常用场景：
  - 报名成功通知
  - 审核结果通知
  - 展会前提醒
  - 重要事项通知

## 3. 数据结构设计

### 3.1 报名入口配置表 (exhibition_registration_entry)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 报名入口ID | 是 | AUTO_INCREMENT |
| name | VARCHAR(255) | 报名入口名称 | 否 | NOT NULL |
| status | TINYINT | 状态（0:关闭, 1:开启） | 否 | DEFAULT 0 |
| start_time | DATETIME | 开始时间 | 否 | NOT NULL |
| end_time | DATETIME | 结束时间 | 否 | NOT NULL |
| description | TEXT | 报名须知 | 否 | |
| created_at | DATETIME | 创建时间 | 否 | DEFAULT CURRENT_TIMESTAMP |
| updated_at | DATETIME | 更新时间 | 否 | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP |

### 3.2 报名信息表 (exhibition_registration)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 报名ID | 是 | AUTO_INCREMENT |
| entry_id | INT | 报名入口ID | 否 | NOT NULL, FOREIGN KEY |
| company_name | VARCHAR(255) | 公司名称 | 否 | NOT NULL |
| contact_person | VARCHAR(100) | 联系人姓名 | 否 | NOT NULL |
| phone_number | VARCHAR(20) | 联系电话 | 否 | NOT NULL |
| email | VARCHAR(255) | 电子邮箱 | 否 | NOT NULL |
| participation_type | VARCHAR(50) | 参与类型 | 否 | |
| booth_area | VARCHAR(50) | 展位面积需求 | 否 | |
| status | TINYINT | 状态（0:待审核, 1:已通过, 2:已拒绝, 3:已取消） | 否 | DEFAULT 0 |
| approval_comment | TEXT | 审核意见 | 否 | |
| created_at | DATETIME | 创建时间 | 否 | DEFAULT CURRENT_TIMESTAMP |
| updated_at | DATETIME | 更新时间 | 否 | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP |

### 3.3 报名材料表 (exhibition_registration_material)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 材料ID | 是 | AUTO_INCREMENT |
| registration_id | INT | 报名ID | 否 | NOT NULL, FOREIGN KEY |
| file_name | VARCHAR(255) | 文件名 | 否 | NOT NULL |
| file_path | VARCHAR(500) | 文件路径 | 否 | NOT NULL |
| file_size | BIGINT | 文件大小（字节） | 否 | |
| file_type | VARCHAR(100) | 文件类型 | 否 | |
| created_at | DATETIME | 上传时间 | 否 | DEFAULT CURRENT_TIMESTAMP |

### 3.4 参展人员表 (exhibition_participants)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 参展人员ID | 是 | AUTO_INCREMENT |
| registration_id | INT | 报名ID | 否 | NOT NULL, FOREIGN KEY |
| name | VARCHAR(100) | 姓名 | 否 | NOT NULL |
| position | VARCHAR(100) | 职位 | 否 | |
| phone | VARCHAR(20) | 手机号 | 否 | NOT NULL |
| email | VARCHAR(255) | 电子邮箱 | 否 | |
| id_type | VARCHAR(50) | 证件类型 | 否 | NOT NULL |
| id_number | VARCHAR(50) | 证件号码 | 否 | NOT NULL |
| status | TINYINT | 状态（0:待审核, 1:已通过, 2:已拒绝） | 否 | DEFAULT 0 |
| created_at | DATETIME | 创建时间 | 否 | DEFAULT CURRENT_TIMESTAMP |
| updated_at | DATETIME | 更新时间 | 否 | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP |

### 3.5 参展人员材料表 (exhibition_participant_materials)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 材料ID | 是 | AUTO_INCREMENT |
| participant_id | INT | 参展人员ID | 否 | NOT NULL, FOREIGN KEY |
| file_name | VARCHAR(255) | 文件名 | 否 | NOT NULL |
| file_path | VARCHAR(500) | 文件路径 | 否 | NOT NULL |
| file_size | BIGINT | 文件大小（字节） | 否 | |
| file_type | VARCHAR(100) | 文件类型 | 否 | |
| material_type | VARCHAR(100) | 材料类型（身份证、工作证等） | 否 | |
| created_at | DATETIME | 上传时间 | 否 | DEFAULT CURRENT_TIMESTAMP |

### 3.6 展商码与二维码表 (exhibition_participant_qrcodes)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 记录ID | 是 | AUTO_INCREMENT |
| participant_id | INT | 参展人员ID | 否 | NOT NULL, FOREIGN KEY, UNIQUE |
| exhibitor_code | VARCHAR(50) | 展商码 | 否 | NOT NULL, UNIQUE |
| qr_code_content | TEXT | 二维码内容 | 否 | NOT NULL |
| qr_code_image_path | VARCHAR(500) | 二维码图片路径 | 否 | |
| generation_time | DATETIME | 生成时间 | 否 | DEFAULT CURRENT_TIMESTAMP |
| expiry_time | DATETIME | 过期时间 | 否 | |
| status | TINYINT | 状态（0:未使用, 1:已激活, 2:已过期, 3:已失效） | 否 | DEFAULT 0 |

### 3.7 身份验证记录表 (exhibition_verification_records)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 记录ID | 是 | AUTO_INCREMENT |
| participant_id | INT | 参展人员ID | 否 | NOT NULL, FOREIGN KEY |
| qrcode_id | INT | 二维码ID | 否 | NOT NULL, FOREIGN KEY |
| verification_time | DATETIME | 验证时间 | 否 | DEFAULT CURRENT_TIMESTAMP |
| verification_location | VARCHAR(255) | 验证地点 | 否 | |
| verification_device_id | VARCHAR(100) | 验证设备ID | 否 | |
| verification_result | TINYINT | 验证结果（0:失败, 1:成功, 2:已过期） | 否 | |
| verification_reason | TEXT | 验证结果原因 | 否 | |

### 3.8 人流量统计表 (exhibition_visitor_stats)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 统计ID | 是 | AUTO_INCREMENT |
| exhibition_id | INT | 展会ID | 否 | NOT NULL, FOREIGN KEY |
| stat_date | DATE | 统计日期 | 否 | NOT NULL |
| hour_segment | TINYINT | 小时段（0-23） | 否 | |
| entry_count | INT | 入场次数 | 否 | DEFAULT 0 |
| unique_count | INT | 独立人数 | 否 | DEFAULT 0 |
| location | VARCHAR(255) | 区域位置 | 否 | |
| created_at | DATETIME | 创建时间 | 否 | DEFAULT CURRENT_TIMESTAMP |
| updated_at | DATETIME | 更新时间 | 否 | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP |

### 3.9 短信发送记录表 (sms_send_record)

| 字段名 | 数据类型 | 描述 | 是否主键 | 约束 |
|-------|---------|------|---------|------|
| id | INT | 记录ID | 是 | AUTO_INCREMENT |
| registration_ids | TEXT | 报名ID列表（JSON格式） | 否 | |
| phone_numbers | TEXT | 手机号列表（JSON格式） | 否 | NOT NULL |
| content | TEXT | 短信内容 | 否 | NOT NULL |
| status | TINYINT | 发送状态（0:失败, 1:成功） | 否 | DEFAULT 0 |
| failure_reason | TEXT | 失败原因 | 否 | |
| created_at | DATETIME | 发送时间 | 否 | DEFAULT CURRENT_TIMESTAMP |

## 4. 界面设计

### 4.1 页面结构

#### 4.1.1 报名入口管理页面

- 顶部操作栏：
  - 添加报名入口按钮
  - 搜索框
- 表格区域：
  - 展示所有报名入口
  - 包含名称、状态、开始时间、结束时间等字段
  - 操作列：编辑、删除、查看详情
- 分页控件

#### 4.1.2 报名信息管理页面

- 顶部操作栏：
  - 搜索框
  - 筛选条件（状态、报名时间等）
  - 批量操作按钮（批量导出、批量发送短信）
- 表格区域：
  - 展示所有报名信息
  - 包含复选框、公司名称、联系人、电话、邮箱、报名时间、状态等字段
  - 操作列：查看详情、编辑、删除、发送短信
- 分页控件

#### 4.1.3 报名详情页面/弹窗

- 基本信息区域：
  - 公司名称、联系人、联系电话、邮箱等
- 报名详情区域：
  - 参与类型、展位面积需求等
- 材料上传区域：
  - 展示上传的材料列表
  - 支持在线预览和下载
- 审核信息区域：
  - 当前状态、审核意见等（仅限管理员）

#### 4.1.4 参展人员管理页面

- 顶部操作栏：
  - 搜索框（按姓名、公司等搜索）
  - 筛选条件（状态、报名时间等）
  - 批量操作按钮（批量导出、批量生成二维码）
- 表格区域：
  - 展示所有参展人员信息
  - 包含复选框、姓名、公司名称、职位、手机号、证件类型、证件号码、展商码、状态等字段
  - 操作列：查看详情、编辑、删除、生成二维码、发送二维码
- 分页控件

#### 4.1.5 参展人员详情页面/弹窗

- 基本信息区域：
  - 姓名、职位、联系方式、证件信息等
- 展商码与二维码区域：
  - 展示唯一展商码
  - 显示二维码图片
  - 提供下载和发送二维码的按钮
- 材料上传区域：
  - 展示上传的个人材料列表
  - 支持在线预览和下载
- 验证记录区域：
  - 显示二维码验证历史记录
  - 包含验证时间、地点等信息
- 审核信息区域：
  - 当前状态、审核意见等（仅限管理员）

#### 4.1.6 材料管理页面

- 顶部操作栏：
  - 搜索框（按文件名、所属公司等搜索）
  - 筛选条件（材料类型、状态、上传时间等）
- 表格区域：
  - 展示所有上传的材料
  - 包含文件名、所属公司/人员、文件大小、上传时间、材料类型、状态等字段
  - 操作列：预览、下载、删除、审核（管理员）
- 分页控件

#### 4.1.7 身份验证页面

- 扫描区域：
  - 摄像头预览界面
  - 扫描框提示
- 验证结果展示区域：
  - 验证状态（通过/拒绝）
  - 参展人员基本信息（姓名、公司、职位）
  - 展商码
- 验证历史记录列表
- 操作按钮：
  - 重新扫描
  - 手动输入展商码

#### 4.1.8 人流量统计页面

- 实时统计卡片：
  - 当前总访客数、今日总访客数、高峰时段等
- 时间趋势图表：
  - 展示人流量随时间的变化趋势
- 区域分布图表：
  - 展示不同区域的人流量分布
- 筛选条件：
  - 时间范围选择、区域选择等
- 导出统计报告按钮

#### 4.1.9 数据统计页面

- 统计概览卡片：
  - 总报名数、总公司数、审核通过数、待审核数、总参展人数等
- 时间趋势图表：
  - 展示报名数量和参展人数随时间的变化趋势
- 分布图表：
  - 展示不同类型参与方的分布情况
- 筛选条件：
  - 时间范围选择、参与类型筛选等

#### 4.1.5 短信发送弹窗

- 收件人选择：
  - 已选报名者列表
- 短信内容编辑：
  - 文本输入框
  - 支持模板选择
- 发送预览

## 5. 业务流程

### 5.1 报名入口配置流程
1. 管理员登录系统
2. 进入展会报名模块
3. 点击"报名入口配置"
4. 填写展会名称、报名截止时间、报名须知等基本信息
5. 配置报名必填字段和可选字段
6. 设置报名材料要求（类型、数量、大小限制）
7. 预览报名表单效果
8. 提交配置
9. 系统保存配置，生成唯一的报名入口链接和二维码
10. 管理员可复制链接或下载二维码用于宣传

### 5.2 展商报名流程
1. 展商通过链接或扫描二维码访问报名页面
2. 查看展会信息和报名须知
3. 填写公司基本信息（公司名称、联系人、联系方式等）
4. 上传所需报名材料
5. 确认并提交报名信息
6. 系统进行表单数据验证
7. 验证通过后，系统生成报名号并显示成功页面
8. 自动发送报名成功短信通知
9. 报名数据进入待审核队列

### 5.3 报名信息审核流程
1. 管理员登录系统
2. 进入展会报名模块
3. 查看待审核报名列表
4. 点击单个报名记录查看详细信息和上传材料
5. 审核企业资质和材料完整性
6. 根据审核标准做出通过或拒绝决定
7. 填写审核意见和备注
8. 提交审核结果
9. 系统更新报名状态
10. 自动发送审核结果短信通知给展商
11. 对于拒绝的报名，提供补充材料或申诉入口

### 5.4 批量审核流程
1. 管理员登录系统
2. 进入展会报名模块
3. 使用筛选条件筛选需要批量审核的记录
4. 在列表中多选待审核记录
5. 点击"批量审核"按钮
6. 选择统一的审核结果（通过/拒绝）
7. 填写通用审核意见
8. 确认批量审核
9. 系统批量更新报名状态并记录操作日志
10. 自动批量发送审核结果短信通知

### 5.5 参展人员信息添加流程
1. 展商登录系统，进入"我的报名"页面
2. 点击已通过审核的报名记录旁的"添加参展人员"按钮
3. 在参展人员添加页面，填写参展人员姓名、职位、手机号、邮箱、证件类型、证件号码等信息
4. 上传相关材料（如身份证复印件、工作证等）
5. 点击"保存"按钮，系统保存参展人员信息
6. 管理员审核参展人员信息（可选）

### 5.6 展商码与二维码生成流程
1. 参展人员信息添加完成且审核通过后，系统自动触发二维码生成流程
2. 系统为每个参展人员生成唯一的展商码
3. 系统基于展商码和人员信息生成唯一的二维码内容
4. 系统调用二维码生成服务，生成二维码图片
5. 系统将展商码、二维码内容和图片路径保存到数据库
6. 系统通过邮件或短信将二维码发送给参展人员

### 5.7 身份验证流程
1. 参展人员到达展会现场入口
2. 现场工作人员使用扫码设备扫描参展人员的二维码
3. 系统解析二维码内容，获取展商码
4. 系统根据展商码查询对应参展人员信息
5. 系统验证二维码的有效性（是否过期、是否已使用等）
6. 系统显示验证结果：
   - 验证成功：显示参展人员基本信息，允许入场
   - 验证失败：显示失败原因
   - 已过期：提示二维码已过期
7. 系统记录验证结果到身份验证记录表

### 5.8 人流量统计流程
1. 系统基于身份验证记录自动进行人流量统计
2. 系统按日期、时间段、区域位置等维度进行数据统计
3. 系统实时更新人流量统计数据
4. 管理员可在"数据统计"页面查看人流量统计图表和数据

### 5.9 数据统计查看流程
1. 管理员登录系统
2. 进入展会报名模块
3. 点击"数据统计"菜单
4. 查看统计概览数据（总报名数、各状态数量）
5. 选择时间范围、行业分类等维度
6. 查看趋势图、饼图等可视化数据
7. 点击图表可查看详细数据列表
8. 可选导出统计报告

### 5.10 数据导出流程
1. 管理员登录系统
2. 进入展会报名模块
3. 在报名信息列表页面，使用筛选条件确定导出范围
4. 选择要导出的记录（单选、多选或全选当前页）
5. 点击"导出"按钮
6. 在导出配置弹窗中，选择导出格式（Excel/CSV）
7. 选择需要导出的字段
8. 设置敏感信息处理方式
9. 确认导出
10. 系统进行数据处理并生成文件
11. 对于大量数据，系统提示异步处理，用户可在任务中心查看进度
12. 文件生成完成后自动下载或提供下载链接

### 5.11 短信通知发送流程
1. 管理员登录系统
2. 进入展会报名模块
3. 选择要发送短信的报名记录
4. 点击"发送短信"按钮
5. 在短信发送弹窗中，选择预设短信模板
6. 编辑短信内容，可插入变量（如{公司名称}、{联系人}等）
7. 预览短信效果，检查字数和格式
8. 确认发送
9. 系统进行短信内容审核
10. 调用短信服务接口发送短信
11. 记录发送状态和结果
12. 对于发送失败的短信，自动进入重试队列

### 5.12 报名信息编辑流程
1. 管理员登录系统
2. 进入展会报名模块
3. 在报名信息列表中找到需要编辑的记录
4. 点击"编辑"按钮
5. 在编辑弹窗中修改相关信息
6. 对于已审核通过的记录，系统提示编辑限制
7. 保存修改
8. 系统进行数据验证并更新记录
9. 记录操作日志

### 5.13 报名材料管理流程
1. 管理员登录系统
2. 进入展会报名模块
3. 查看报名信息详情
4. 在材料列表区域，可进行以下操作：
   - 上传新材料：点击上传按钮，选择本地文件，等待上传完成
   - 预览材料：点击预览按钮，在新窗口或弹窗中查看材料内容
   - 下载材料：点击下载按钮，将材料保存到本地
   - 删除材料：点击删除按钮，确认后删除材料
5. 系统记录材料操作日志
6. 对于关键材料的修改，系统可选择是否重新触发审核

### 5.14 参展人员材料管理流程
1. 管理员或展商进入"参展人员管理"页面
2. 在参展人员列表中，点击"材料"按钮
3. 在材料列表中，可以查看、下载已上传的参展人员材料
4. 点击"上传"按钮，可以添加新的参展人员材料
5. 点击"删除"按钮，可以删除不需要的参展人员材料

## 6. 与现有系统的集成

### 6.1 导航菜单集成

系统将在展会运营后台的侧边栏导航中添加「展会报名」菜单项，包含以下子菜单项：

- 报名入口配置
- 报名信息管理
- 参展人员管理
- 数据统计

集成示例代码（Navigation.js）：

```javascript
// 添加展会报名菜单项
const exhibitionMenu = {
  id: 'exhibition-registration',
  title: '展会报名',
  icon: 'el-icon-date',
  children: [
    {
      id: 'exhibition-registration-entry',
      title: '报名入口配置',
      path: '/exhibition/registration/entry'
    },
    {
      id: 'exhibition-registration-info',
      title: '报名信息管理',
      path: '/exhibition/registration/info'
    },
    {
      id: 'exhibition-participants',
      title: '参展人员管理',
      path: '/exhibition/participants'
    },
    {
      id: 'exhibition-registration-statistics',
      title: '数据统计',
      path: '/exhibition/registration/statistics'
    }
  ]
};

// 将菜单项添加到展会运营导航菜单中
navigationMenu.push(exhibitionMenu);
```

### 6.2 权限管理集成

系统将在展会运营权限管理模块中添加以下权限控制点：

| 权限点 | 权限名称 | 描述 | 所属模块 |
|-------|---------|------|--------|
| exhibition_registration_entry_view | 查看报名入口配置 | 允许查看报名入口配置列表 | 展会运营 |
| exhibition_registration_entry_create | 创建报名入口配置 | 允许创建新的报名入口 | 展会运营 |
| exhibition_registration_entry_edit | 编辑报名入口配置 | 允许编辑报名入口配置 | 展会运营 |
| exhibition_registration_entry_delete | 删除报名入口配置 | 允许删除报名入口配置 | 展会运营 |
| exhibition_registration_entry_enable | 启用/禁用报名入口 | 允许启用或禁用报名入口 | 展会运营 |
| exhibition_registration_info_view | 查看报名信息 | 允许查看报名信息列表 | 展会运营 |
| exhibition_registration_info_audit | 审核报名信息 | 允许审核报名信息 | 展会运营 |
| exhibition_registration_info_export | 导出报名信息 | 允许导出报名信息 | 展会运营 |
| exhibition_registration_info_send_sms | 发送短信通知 | 允许发送短信通知 | 展会运营 |
| exhibition_registration_statistics_view | 查看数据统计 | 允许查看报名数据统计 | 展会运营 |
| exhibition_participants_view | 查看参展人员信息 | 允许查看参展人员列表 | 展会运营 |
| exhibition_participants_create | 添加参展人员 | 允许添加参展人员信息 | 展会运营 |
| exhibition_participants_edit | 编辑参展人员信息 | 允许编辑参展人员信息 | 展会运营 |
| exhibition_participants_delete | 删除参展人员信息 | 允许删除参展人员信息 | 展会运营 |
| exhibition_participants_audit | 审核参展人员信息 | 允许审核参展人员信息 | 展会运营 |
| exhibition_qrcode_generate | 生成展商码与二维码 | 允许生成展商码与二维码 | 展会运营 |
| exhibition_qrcode_view | 查看展商码与二维码 | 允许查看展商码与二维码 | 展会运营 |
| exhibition_verification_view | 查看身份验证记录 | 允许查看身份验证记录 | 展会运营 |
| exhibition_visitor_stats_view | 查看人流量统计 | 允许查看人流量统计数据 | 展会运营 |

### 6.3 二维码生成服务集成

系统将集成第三方二维码生成服务，用于生成参展人员的二维码。集成内容包括：

1. 调用二维码生成API，传入包含展商码和人员信息的内容。
2. 获取生成的二维码图片，并保存到系统中。
3. 处理二维码生成过程中的异常情况。

集成示例代码：

```javascript
// 二维码生成服务集成示例
async function generateQRCode(content, size = 300) {
  try {
    const response = await axios.post('/api/qrcode/generate', {
      content,
      size,
      errorCorrectionLevel: 'H', // 高容错级别
      margin: 1
    });
    
    return response.data.imageUrl;
  } catch (error) {
    console.error('二维码生成失败:', error);
    throw new Error('二维码生成失败');
  }
}
```

### 6.4 身份验证服务集成

系统将集成身份验证服务，用于现场扫码验证参展人员身份。集成内容包括：

1. 接收二维码扫描结果，解析二维码内容。
2. 验证二维码的有效性，查询对应参展人员信息。
3. 记录验证结果到数据库。
4. 返回验证结果给前端展示。

集成示例代码：

```javascript
// 身份验证服务集成示例
async function verifyQRCode(qrCodeContent) {
  try {
    // 解析二维码内容
    const parsedData = JSON.parse(qrCodeContent);
    const exhibitorCode = parsedData.exhibitorCode;
    
    // 验证二维码有效性
    const response = await axios.post('/api/exhibition/verify', {
      exhibitorCode
    });
    
    // 记录验证结果
    await recordVerification(response.data.participantId, response.data.qrcodeId, response.data.verificationResult);
    
    return response.data;
  } catch (error) {
    console.error('二维码验证失败:', error);
    throw new Error('二维码验证失败');
  }
}
```

### 6.5 人流量统计服务集成

系统将集成人流量统计服务，用于统计展会现场的人流量数据。集成内容包括：

1. 基于身份验证记录，实时统计人流量数据。
2. 按日期、时间段、区域位置等维度进行数据聚合。
3. 提供数据查询接口，供前端展示统计图表。

集成示例代码：

```javascript
// 人流量统计服务集成示例
async function getVisitorStatistics(params) {
  try {
    const response = await axios.get('/api/exhibition/visitor-stats', {
      params: {
        exhibitionId: params.exhibitionId,
        startDate: params.startDate,
        endDate: params.endDate,
        location: params.location,
        groupBy: params.groupBy // 'date', 'hour', 'location'
      }
    });
    
    return response.data;
  } catch (error) {
    console.error('获取人流量统计数据失败:', error);
    throw new Error('获取人流量统计数据失败');
  }
}

## 7. 异常处理机制

### 7.1 表单验证

系统将对所有用户输入进行严格的表单验证，确保数据的完整性和正确性。验证内容包括：

- 必填项检查
- 数据格式验证（如手机号、邮箱、身份证号等）
- 数据长度验证
- 业务规则验证

在表单提交时，系统会进行客户端验证，并在服务端进行二次验证，确保数据的安全性和准确性。特别对于参展人员信息和材料上传，将进行额外的格式和内容验证。

### 7.2 错误提示

系统将提供明确、友好的错误提示，帮助用户理解和解决问题。错误提示将包括：

- 表单字段级别的错误提示
- 操作级别的错误提示
- 业务逻辑级别的错误提示
- 系统级别的错误提示

错误提示将以醒目的方式显示，如红色提示文字、对话框等，确保用户能够及时注意到。

### 7.3 安全措施

为确保系统安全，防止恶意攻击和数据泄露，系统将采取以下安全措施：

- 输入参数验证和过滤，防止SQL注入和XSS攻击
- 接口访问频率限制，防止暴力破解
- 敏感数据加密存储（如身份证号、手机号等）
- 权限控制，确保用户只能访问其有权限的数据和功能
- 操作日志记录，便于安全审计和问题追溯

### 7.4 二维码生成与验证异常处理

#### 7.4.1 二维码生成异常

- **生成失败**：当二维码生成失败时，系统将返回明确的错误信息，并尝试重试操作。
- **图片保存失败**：如果二维码图片保存失败，系统将记录错误并提供备选存储方案。
- **生成频率限制**：为防止恶意生成大量二维码，系统将设置生成频率限制，并在达到限制时提供友好提示。

#### 7.4.2 二维码验证异常

- **无效二维码**：当扫描的二维码无效或已过期时，系统将返回明确的错误信息，如「无效的二维码，请重新获取」或「二维码已过期，请联系管理员」。
- **解析失败**：如果二维码内容解析失败，系统将提供详细的错误日志和提示信息。
- **验证频率限制**：对于同一二维码的重复验证，系统将设置合理的限制，防止恶意扫描。
- **网络异常**：在网络不稳定的情况下，系统将实现离线验证功能，并在网络恢复后同步数据。

### 7.5 人流量统计异常处理

- **数据同步异常**：当人流量统计数据同步失败时，系统将记录异常并尝试重新同步。
- **数据丢失**：对于可能的数据丢失情况，系统将实现数据恢复机制，确保统计数据的完整性。
- **统计误差**：对于统计结果的异常波动，系统将提供预警机制，提示相关人员进行检查。

### 7.6 材料上传异常处理

- **文件格式错误**：当用户上传的文件格式不符合要求时，系统将返回明确的错误提示。
- **文件大小超限**：当文件大小超过限制时，系统将提供友好的提示，并说明具体的大小限制。
- **上传失败**：在上传过程中出现错误时，系统将提供重试机制和明确的错误信息。
- **文件安全检查**：系统将对上传的文件进行安全检查，防止恶意文件上传

## 8. 部署与实施计划

### 8.1 数据库迁移

在部署前，需要执行数据库迁移脚本，创建必要的数据表和索引。迁移脚本将包括：

- 创建报名入口配置表(exhibition_registration_entry)
- 创建报名信息表(exhibition_registration)
- 创建报名材料表(exhibition_registration_material)
- 创建参展人员表(exhibition_participants)
- 创建参展人员材料表(exhibition_participant_materials)
- 创建展商码与二维码表(exhibition_participant_qrcodes)
- 创建身份验证记录表(exhibition_verification_records)
- 创建人流量统计表(exhibition_visitor_stats)
- 创建短信发送记录表(sms_send_record)

### 8.2 代码实现

开发团队将按照功能需求文档，逐步实现各个功能模块。实现过程将包括：

- 前端页面开发（包括新增的参展人员管理页面、展商码与二维码生成页面等）
- 后端接口开发（包括新增的参展人员管理接口、二维码生成与验证接口等）
- 数据库访问层实现（包括新增数据表的访问接口）
- 业务逻辑层实现（包括新增功能的业务逻辑处理）
- 系统集成实现（包括二维码生成服务、身份验证服务、人流量统计服务的集成）

### 8.3 测试计划

系统部署前，需要进行全面的测试，确保系统的稳定性和功能的正确性。测试内容将包括：

- 单元测试：对各个功能模块进行单元测试，确保模块功能的正确性。
- 集成测试：测试各个功能模块之间的交互和集成，确保系统整体功能的正确性。
- 性能测试：测试系统在高并发情况下的性能表现，特别是二维码生成和验证功能在大量用户同时访问时的性能。
- 安全测试：测试系统的安全性，防止恶意攻击和数据泄露，特别是对敏感个人信息的保护。
- 用户验收测试：让最终用户参与测试，确保系统满足用户的实际需求，包括展商和参展人员的使用体验。
- 二维码功能专项测试：针对二维码生成、扫描、验证等功能进行专项测试，确保在各种环境和设备下的可靠性。
- 人流量统计功能测试：模拟大量扫码场景，测试人流量统计的准确性和实时性。

## 9. 后续优化建议

### 9.1 功能扩展

- **多渠道报名**：增加微信小程序、APP等多渠道报名方式，提升用户体验。
- **个性化定制**：提供个性化的报名表单和验证规则配置，满足不同展会的需求。
- **消息推送**：增加消息推送功能，通过多种渠道（短信、邮件、微信等）通知用户报名状态和展会信息。
- **智能签到系统**：集成人脸识别等生物识别技术，结合二维码验证，提升签到效率和安全性。
- **展位预订功能**：增加展位在线预订和管理功能，与报名和人员管理模块联动。
- **智能路径规划**：基于人流量数据，为参展人员提供智能路径规划，优化参观体验。

### 9.2 用户体验优化

- **简化报名流程**：优化报名流程，减少用户操作步骤，提升报名转化率。
- **移动端适配**：加强移动端适配，确保在手机和平板等移动设备上的良好体验。
- **数据可视化**：优化数据统计功能，提供更丰富的数据可视化展示，包括实时人流量热力图、人员密度分布图等。
- **二维码优化**：提供二维码美化功能，支持添加企业Logo、背景图等，提升品牌形象。
- **离线验证**：增强离线验证功能，确保在网络不稳定环境下仍能正常进行身份验证。
- **自助服务**：提供参展人员自助修改信息、打印胸卡等自助服务功能。

### 9.3 系统集成

- **CRM系统集成**：与CRM系统集成，实现客户信息的自动同步和管理。
- **展会运营系统集成**：与展会运营系统集成，实现报名数据和展会运营数据的无缝对接。
- **支付系统集成**：增加支付功能，支持在线支付报名费等相关费用。
- **智能门禁系统集成**：与智能门禁系统集成，实现二维码和身份验证结果与门禁系统的联动。
- **智能硬件集成**：集成智能摄像头、传感器等硬件设备，提升人流量统计的准确性和实时性。
- **数据分析平台集成**：与专业数据分析平台集成，提供更深入的参展人员行为分析和洞察。