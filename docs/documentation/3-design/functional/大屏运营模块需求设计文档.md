# 大屏运营模块需求设计文档

## 文档信息

| 项目名称 | 人民城轨2.0 - 大屏运营模块 |
|---------|------------------------|
| 文档版本 | v2.1 |
| 文档类型 | 功能需求设计文档 |
| 创建日期 | 2025-10-13 |
| 更新日期 | 2024-05-17 |
| 产品经理 | AI产品专家 |
| 适用范围 | B端后台管理系统 |
| 修改记录 | 基于Figma设计更新8种大屏界面，扩展模块类型，优化数据模型和业务流程；调整大屏管理模块为系统一级功能，与系统管理、AI管理、运营管理等平级

---

## 目录

1. [需求概述](#1-需求概述)
2. [产品定位](#2-产品定位)
3. [用户角色](#3-用户角色)
4. [功能架构](#4-功能架构)
5. [核心功能详细设计](#5-核心功能详细设计)
6. [数据模型设计](#6-数据模型设计)
7. [业务流程设计](#7-业务流程设计)
8. [交互设计规范](#8-交互设计规范)
9. [异常处理机制](#9-异常处理机制)
10. [性能要求](#10-性能要求)
11. [安全要求](#11-安全要求)
12. [扩展性设计](#12-扩展性设计)

---

## 1. 需求概述

### 1.1 项目背景

人民城轨协会需要一套数据大屏内容管理系统，用于维护各类大屏中展示的子模块内容信息。系统需要提供便捷的内容编辑和管理功能，确保大屏展示内容的及时更新。

**现存痛点：**
- ❌ 内容更新繁琐，需要技术人员介入
- ❌ 配置管理不清晰

### 1.2 产品目标

打造一套**简单高效的大屏内容管理系统**，实现：

✅ **便捷维护** - 运营人员可独立完成大屏子模块内容更新  
✅ **配置清晰** - 大屏配置管理结构明确，便于维护
✅ **内容同步** - 支持发布内容的同步功能

### 1.3 核心价值

| 价值维度 | 提升效果 | 量化指标 |
|---------|---------|---------|
| **效率提升** | 内容更新速度 | 从10分钟缩短到3分钟，提升**70%** |
| **成本降低** | 人力成本 | 减少技术人员介入，降低成本**50%** |
| **质量提升** | 准确率 | 结构化编辑减少错误，准确率提升**85%** |

---

## 2. 产品定位

### 2.1 产品类型

**B端内容管理系统**，面向企业内部运营人员的专业工具。

### 2.2 核心特色

🌟 **模块化管理** - 大屏子模块独立编辑，灵活维护  
🌟 **配置清晰** - 大屏配置结构明确，易于理解
🌟 **内容同步** - 支持发布内容的同步功能

### 2.3 技术架构

```
前端技术栈：
├── React 17 - 组件化框架
├── Ant Design 4.24 - UI组件库
└── Moment.js - 时间处理

后端技术栈（生产环境）：
├── RESTful API - 接口规范
└── MySQL - 数据持久化

安全合规：
└── 等保三级 - 安全合规要求
```

---

## 3. 用户角色

### 3.1 角色定义

| 角色名称 | 职责范围 | 权限级别 | 典型场景 |
|---------|---------|---------|---------|
| **超级管理员** | 系统全部功能 | 最高 | 系统配置、用户管理、全局设置 |
| **内容运营人员** | 内容编辑管理 | 高 | 日常新闻更新、数据维护 |
| **数据维护员** | 数据录入更新 | 中 | 统计数据、会员信息维护 |
| **只读查看者** | 仅查看权限 | 低 | 查看大屏内容 |

### 3.2 用户画像

**主要用户：内容运营人员**
- 年龄：25-40岁
- 学历：大专及以上
- 技能：熟悉Office办公软件，无编程经验
- 痛点：希望快速更新内容，不想依赖技术人员
- 诉求：操作简单、效果直观、不出错

---

## 4. 功能架构

### 4.1 功能架构图

**定位说明：大屏运营模块作为人民城轨2.0系统的一级功能模块，与系统管理、AI管理、运营管理等功能平级。**

```
人民城轨2.0系统
│
├── 系统管理
├── AI管理
├── 运营管理
└── 大屏运营模块（一级功能）
    │
    ├── 大屏管理
    │   ├── 1. 大屏列表管理
    │
    ├── 1. 大屏列表管理
    │   ├── 1.1 大屏列表展示
    │   ├── 1.2 搜索筛选功能
    │   ├── 1.3 大屏新建/删除
    │   └── 1.4 批量操作
    │
    ├── 2. 大屏配置管理 ⭐核心
    │   ├── 2.1 子模块内容编辑
    │   ├── 2.2 刷新间隔配置
    │   ├── 2.3 维护信息管理
    │   └── 2.4 同步功能入口
    │
    ├── 3. 多界面支持
    │   ├── 3.1 日常版界面（P1-日常）
    │   ├── 3.2 协会版界面（P2-协会简介）
    │   ├── 3.3 行业版界面（P3-行业统计）
    │   ├── 3.4 统计版界面（P4-统计部1、P5-统计部2）
    │   ├── 3.5 标准版界面（P6-标准部）
    │   ├── 3.6 文化版界面（P7-文化和培训部-1）
    │   ├── 3.7 评审版界面（P10-评审部）
    │   └── 3.8 科技奖界面（P12-科技进步奖大屏）
    │
    ├── 4. 情景模式管理
    │   ├── 4.1 情景模式列表展示
    │   ├── 4.2 情景模式创建/编辑
    │   ├── 4.3 大屏组合配置
    │   └── 4.4 播放模式设置
    │
    └── 背景墙管理
        ├── 1. 背景图片上传
        ├── 2. 宣传语编辑
        └── 3. 样式调整
```

### 4.2 功能优先级

| 优先级 | 功能模块 | 开发周期 | 重要程度 |
|-------|---------|---------|---------|
| **P0** | 大屏管理-大屏列表管理 | 1周 | 基础功能，必须实现 |
| **P0** | 大屏管理-大屏配置管理 | 2周 | 核心功能，必须实现 |
| **P0** | 背景墙管理 | 2周 | 核心功能，必须实现 |
| **P1** | 大屏管理-多界面支持 | 3周 | 重要功能，优先实现，包含8个大屏界面 |
| **P1** | 大屏管理-情景模式管理 | 2周 | 重要功能，优先实现 |

---

## 5. 核心功能详细设计

### 5.1 大屏管理

#### 5.1.1 大屏列表管理

#### 5.1.1 功能描述

提供大屏配置的集中管理界面，支持查看、创建、编辑、删除大屏配置。

### 5.4 情景模式管理

#### 5.4.1 情景模式功能概述

情景模式管理模块允许管理员创建、编辑、删除和管理情景模式。情景模式是一种高级功能，通过组合多个大屏并设置其播放顺序和时长，实现大屏内容的智能化展示。该功能特别适用于需要按照特定业务场景（如安全监控、线路运营、领导参观等）进行大屏内容切换的场景。

#### 5.4.2 情景模式详细设计

##### 5.4.2.1 功能字段

| 字段名 | 数据类型 | 描述 | 是否可搜索 | 是否可筛选 |
| :--- | :--- | :--- | :--- | :--- |
| 情景ID | String | 情景模式唯一标识符 | 是 | 否 |
| 情景名称 | String | 情景模式的显示名称 | 是 | 否 |
| 情景描述 | String | 情景模式的简要描述 | 否 | 否 |
| 播放模式 | String | 播放模式（自动/手动） | 否 | 是 |
| 默认时长 | Number | 自动播放模式下每个大屏的默认展示时长（秒） | 否 | 否 |
| 大屏组合 | Array | 包含多个大屏对象的数组，每个对象包含大屏ID、名称、显示时长等信息 | 否 | 否 |
| 创建时间 | DateTime | 情景模式创建的时间 | 否 | 是 |
| 更新时间 | DateTime | 情景模式最后更新的时间 | 否 | 是 |

##### 5.4.2.2 交互逻辑

1. 进入页面后，默认显示所有情景模式的列表。
2. 用户可以使用搜索框根据情景ID或情景名称进行搜索。
3. 用户可以点击"新建情景"按钮创建新的情景模式。
4. 在新建/编辑情景模式对话框中：
   - 输入情景名称和描述
   - 选择播放模式（自动/手动）
   - 如果选择自动播放模式，设置默认展示时长
   - 添加、移除和排序大屏，设置每个大屏的展示时长（可覆盖默认时长）
5. 用户可以对现有情景模式进行编辑或删除操作。
6. 支持情景模式的批量操作，如批量删除。

#### 5.4.3 情景模式示例

##### 5.4.3.1 安全监控情景

**场景描述**：用于安全管理人员实时监控地铁各关键区域的安全状况。

**大屏组合**：
- 安全监控大屏：默认时长 60秒，用于整体安全态势感知
- 客流密度大屏：默认时长 30秒，用于监控客流拥挤情况
- 视频监控大屏：默认时长 45秒，用于实时视频监控

**播放模式**：自动播放，循环展示以上大屏。

##### 5.4.3.2 线路运营情景

**场景描述**：用于线路运营管理人员了解各线路实时运行状态。

**大屏组合**：
- 线路运行大屏：默认时长 50秒，用于展示各线路列车运行状态
- 设备监控大屏：默认时长 40秒，用于监控关键设备运行状况
- 客流分析大屏：默认时长 55秒，用于分析客流量变化趋势

**播放模式**：自动播放，按顺序循环展示。

##### 5.4.3.3 领导参观情景

**场景描述**：专门为领导参观设计的综合性展示方案。

**大屏组合**：
- 综合态势大屏：默认时长 90秒，用于展示整体运营状况
- 线路运行大屏：默认时长 60秒，用于展示线路运行情况
- 安全监控大屏：默认时长 60秒，用于展示安全状况
- 客流分析大屏：默认时长 60秒，用于展示客流分析

**播放模式**：手动播放，由讲解员根据需要控制切换。

#### 5.1.2 功能字段

**大屏列表字段：**
| 字段名称 | 字段类型 | 是否必填 | 说明 |
|---------|---------|---------|------|
| id | Long | 是 | 大屏唯一标识 |
| name | String(100) | 是 | 大屏名称 |
| maintenanceUser | String(50) | 是 | 维护人 |
| maintenanceTime | DateTime | 是 | 维护时间 |
| refreshInterval | Integer | 是 | 刷新间隔（秒），默认30 |
| createTime | DateTime | 是 | 创建时间 |
| createUser | String(50) | 是 | 创建人 |

#### 5.1.3 交互逻辑

**页面加载：**
```
1. 进入页面
   ↓
2. 调用API获取大屏列表
   ↓
3. 渲染大屏列表表格
   ↓
4. 显示加载完成状态
```

**搜索筛选：**
```
用户输入搜索关键词/选择筛选条件
   ↓
前端实时过滤数据
   ↓
更新表格显示
   ↓
无结果时显示空状态提示
```

#### 5.1.4 异常处理

| 异常场景 | 处理方式 | 用户提示 |
|---------|---------|---------|
| 网络请求失败 | 显示错误提示，提供重试按钮 | "网络连接失败，请检查网络后重试" |
| 数据加载超时 | 10秒超时，显示超时提示 | "加载超时，请刷新页面重试" |
| 权限不足 | 禁用操作按钮，显示权限提示 | "您没有权限执行此操作" |
| 并发冲突 | 提示数据已被修改，刷新数据 | "数据已被其他用户修改，已为您刷新最新数据" |

---

### 5.1.5 大屏配置管理 ⭐核心功能

#### 5.2.1 功能描述

提供大屏子模块内容的编辑和管理功能，支持配置刷新间隔、维护信息，并提供同步功能入口。同时支持Excel模板导出和导入功能，用于图标类数据的批量维护。

#### 5.2.2 功能结构

```
大屏配置管理
│
├── 顶部工具栏
│   ├── 返回按钮
│   ├── 大屏名称显示
│   ├── 保存修改按钮
│   ├── 同步按钮（功能待定）
│   └── Excel操作
│       ├── 导出模板按钮
│       └── 导入数据按钮
│
├── 基础信息配置
│   ├── 大屏名称
│   ├── 维护人
│   ├── 刷新间隔（秒）
│   └── 保存按钮
│
└── 子模块内容编辑
    ├── 模块列表展示
    ├── 模块内容编辑表单
    ├── 表单验证
    └── 保存按钮
```

#### 5.2.3 子模块类型及编辑字段

**1. 新闻类模块（行业新闻、党建园地）**

| 字段名称 | 字段类型 | 验证规则 | 默认值 |
|---------|---------|---------|--------|
| title | String(200) | 必填，最多200字符 | - |
| date | Date | 必填，格式：YYYY-MM-DD | 当前日期 |
| image | String(500) | 选填，URL格式 | 默认占位图 |
| content | Text | 选填，富文本 | - |
| sort | Integer | 必填，1-100 | 自动递增 |

**2. 列表类模块（工作规划）**

| 字段名称 | 字段类型 | 验证规则 | 示例 |
|---------|---------|---------|------|
| title | String(100) | 必填，最多100字符 | "城轨业主领导人峰会" |
| month | String(10) | 必填，格式：N月 | "6月" |
| location | String(50) | 选填 | "北京" |
| description | String(500) | 选填 | - |

**3. 配置类模块（限行尾号）**

| 字段名称 | 字段类型 | 验证规则 | 示例 |
|---------|---------|---------|------|
| todayNumbers | String(10) | 必填，格式：N, N | "3, 8" |
| tomorrowNumbers | String(10) | 必填，格式：N, N | "4, 9" |
| timeRange | String(20) | 必填，格式：HH:MM-HH:MM | "07:00-20:00" |
| weekSchedule | Array(7) | 必填，7个元素 | ["1/6", "2/7", ...] |

**4. 数据类模块（会员统计、行业统计）**

| 字段名称 | 字段类型 | 验证规则 | 说明 |
|---------|---------|---------|------|
| total | Integer | 必填，≥0 | 总数统计 |
| categories | Array | 必填，至少1项 | 分类数据 |
| categories[].name | String(50) | 必填 | 分类名称 |
| categories[].value | Integer | 必填，≥0 | 分类数值 |

**5. 统计图表类模块（基于Figma设计）**

| 字段名称 | 字段类型 | 验证规则 | 说明 |
|---------|---------|---------|------|
| chartTitle | String(200) | 必填 | 图表标题 |
| dataSource | JSON | 必填 | 图表数据源 |
| chartType | String(50) | 必填 | 图表类型（柱状图/饼图/折线图） |
| yearRange | String(50) | 选填 | 年份范围（如：2018~2024） |

**6. 城市信息类模块（基于Figma P1-日常）**

| 字段名称 | 字段类型 | 验证规则 | 说明 |
|---------|---------|---------|------|
| cityName | String(50) | 必填 | 城市名称 |
| date | String(50) | 必填 | 日期（如：05月16日 | 周三） |
| weather | String(100) | 必填 | 天气信息（如：多云转晴 22~32℃） |

**7. 科技奖类模块（基于Figma P12-科技进步奖大屏）**

| 字段名称 | 字段类型 | 验证规则 | 说明 |
|---------|---------|---------|------|
| awardName | String(200) | 必填 | 奖项名称 |
| yearRange | String(50) | 必填 | 年份范围 |
| introduction | Text | 必填 | 奖项简介 |
| statisticsData | JSON | 必填 | 统计数据（申报数量、获奖数量等） |
| yearlyData | Array | 必填 | 年度申报/获奖数据 |
| yearlyData[].year | String(10) | 必填 | 年份 |
| yearlyData[].applications | Integer | 必填 | 申报数量 |
| yearlyData[].awards | Integer | 必填 | 获奖数量 |
| yearlyData[].organizations | Integer | 必填 | 申报单位数量 |

#### 5.2.4 交互流程

**配置编辑流程：**

```mermaid
graph TD
    A[点击大屏配置按钮] --> B[加载大屏数据]
    B --> C[渲染配置页面]
    C --> D[用户修改基础信息/子模块内容]
    D --> E[点击保存]
    E --> F[表单验证]
    F --> |验证失败| G[显示错误提示]
    G --> D
    F --> |验证成功| H[调用API保存]
    H --> |成功| I[显示保存成功提示]
    H --> |失败| J[显示错误提示]
```

**同步功能流程：**
```
用户点击"同步"按钮
   ↓
显示同步中状态
   ↓
调用同步API（功能待定）
   ↓
显示同步结果提示
```

**Excel数据维护流程：**
```mermaid
graph TD
    A[点击导出模板] --> B[下载Excel模板]
    B --> C[湖人能源维护数据]
    C --> D[点击导入数据]
    D --> E[上传Excel文件]
    E --> F[数据格式验证]
    F --> |验证失败| G[显示错误详情]
    F --> |验证成功| H[导入数据]
    H --> |成功| I[显示导入成功提示]
    H --> |失败| J[显示错误信息]
```

#### 5.2.5 异常处理

| 异常场景 | 处理方式 | 用户提示 |
|---------|---------|---------|
| 数据加载失败 | 显示错误页，提供重试按钮 | "数据加载失败，点击重试" |
| 模块数据格式错误 | 使用默认值，记录错误日志 | "部分数据加载异常，已使用默认值" |
| 保存失败 | 显示错误信息 | "保存失败，请重试" |
| 网络断开 | 禁用保存，提示离线状态 | "网络已断开，请检查网络连接" |
| Excel模板下载失败 | 显示错误提示 | "模板下载失败，请稍后重试" |
| Excel文件格式错误 | 显示错误提示，提供格式说明 | "文件格式错误，请使用正确的Excel模板" |
| 数据验证失败 | 显示详细错误信息，包括具体行和列 | "数据验证失败，第X行第Y列：错误说明" |
| 导入数据量过大 | 分批导入，显示进度条 | "数据量较大，正在分批导入，请耐心等待" |

### 5.1.6 多界面支持

---

### 5.2 背景墙管理 ⭐核心功能

#### 5.2.1 功能描述

提供背景墙的管理功能，允许用户上传纯背景图片（无文字），并通过富文本编辑器维护相关宣传语，支持多种样式调整选项。

#### 5.2.2 功能结构

```
背景墙管理
│
├── 背景图片管理
│   ├── 上传按钮
│   ├── 图片预览
│   ├── 图片尺寸验证
│   └── 删除按钮
│
├── 宣传语编辑
│   ├── 富文本编辑器
│   ├── 文本内容输入
│   └── 保存按钮
│
└── 样式调整
    ├── 文字位置设置（左对齐、居中、右对齐）
    ├── 字体选择
    ├── 字体大小调整
    ├── 文字颜色选择
    ├── 描边设置（颜色、粗细）
    └── 样式预览
```

#### 5.2.3 字段配置

**1. 背景墙基础信息**

| 字段名称 | 字段类型 | 验证规则 | 默认值 |
|---------|---------|---------|--------|
| id | String(36) | 自动生成 | UUID |
| name | String(255) | 必填，最多255字符 | - |
| imageUrl | String(500) | 必填，URL格式 | - |
| imageSize | String(50) | 必填，格式：宽x高 | - |
| createTime | DateTime | 自动生成 | 当前时间 |
| createUser | String(50) | 自动填充 | 当前用户 |
| updateTime | DateTime | 自动更新 | 当前时间 |
| updateUser | String(50) | 自动填充 | 当前用户 |
| status | Integer | 默认1 | 1-启用，0-禁用 |

**2. 宣传语配置**

| 字段名称 | 字段类型 | 验证规则 | 默认值 |
|---------|---------|---------|--------|
| id | String(36) | 自动生成 | UUID |
| backgroundWallId | String(36) | 必填，外键关联 | - |
| content | Text | 必填 | - |
| textAlign | String(20) | 可选值：left/center/right | center |
| fontFamily | String(50) | 可选值：Arial/微软雅黑/宋体等 | 微软雅黑 |
| fontSize | Integer | 范围：12-72 | 24 |
| fontColor | String(20) | 格式：#HEX或RGB | #FFFFFF |
| strokeColor | String(20) | 格式：#HEX或RGB | #000000 |
| strokeWidth | Integer | 范围：0-10 | 2 |
| createTime | DateTime | 自动生成 | 当前时间 |
| updateTime | DateTime | 自动更新 | 当前时间 |

#### 5.2.4 交互流程

**背景墙创建与编辑流程：**

```mermaid
graph TD
    A[进入背景墙管理页面] --> B{选择操作}
    B -->|新建背景墙| C[填写背景墙名称]
    B -->|编辑背景墙| D[加载背景墙信息]
    C --> E[上传背景图片]
    D --> E
    E --> F[富文本编辑器编辑宣传语]
    F --> G[调整文字样式]
    G --> H[预览效果]
    H --> I{是否满意?}
    I --> |否| G
    I --> |是| J[点击保存]
    J --> K{保存成功?}
    K --> |是| L[显示成功提示]
    K --> |否| M[显示错误提示]
    L --> N[返回背景墙列表]
    M --> G
```

**图片上传流程：**
```
graph TD
    A[点击上传按钮] --> B[打开文件选择器]
    B --> C[选择图片文件]
    C --> D[前端验证图片格式/大小]
    D --> |验证失败| E[显示错误提示]
    E --> B
    D --> |验证成功| F[上传图片到服务器]
    F --> G{上传成功?}
    G --> |否| H[显示上传失败提示]
    H --> B
    G --> |是| I[显示图片预览]
```

**宣传语样式调整流程：**
```
graph TD
    A[编辑宣传语内容] --> B[选择文字]
    B --> C{选择样式调整}
    C -->|文字位置| D[选择对齐方式]
    C -->|字体选择| E[选择字体]
    C -->|字体大小| F[调整字号]
    C -->|文字颜色| G[选择颜色]
    C -->|描边设置| H[设置描边颜色和粗细]
    D --> I[实时预览效果]
    E --> I
    F --> I
    G --> I
    H --> I
```

#### 5.2.5 异常处理

| 异常场景 | 处理方式 | 用户提示 |
|---------|---------|---------|
| 图片格式错误 | 上传前校验，阻止上传 | "请上传正确格式的图片（JPG、PNG格式）" |
| 图片尺寸不符 | 上传前校验，阻止上传 | "上传图片尺寸必须与大屏尺寸一致（宽x高）" |
| 图片大小超限 | 上传前校验，阻止上传 | "图片大小不能超过5MB，请压缩后再上传" |
| 图片上传失败 | 显示错误提示，支持重试 | "图片上传失败，请重试" |
| 富文本编辑异常 | 提供错误信息，支持撤销操作 | "编辑过程中发生错误，您可以尝试撤销操作" |
| 样式应用失败 | 恢复默认样式，提供错误提示 | "样式应用失败，已恢复默认样式" |
| 保存失败 | 显示错误信息，支持重试 | "保存失败，请重试" |

**功能描述**：系统支持多种大屏界面布局，根据Figma设计文件，包含8种不同的大屏界面设计。每种界面针对不同的业务场景，展示特定领域的关键数据和信息，满足不同用户群体的需求。

**功能结构**：

| 界面类型 | 界面ID | 适用场景 | 主要内容 |
|---------|-------|--------|--------|
| 日常版界面 | P1-日常 | 日常运营监控 | 城市信息、天气、日期显示、核心运营指标 |
| 协会版界面 | P2-协会简介 | 协会介绍展示 | 协会简介、组织架构、发展历程、会员单位概况 |
| 行业版界面 | P3-行业统计 | 行业数据概览 | 运营线路城市群分布、全国轨道交通统计、行业关键指标 |
| 统计版界面 | P4-统计部1 | 深度统计分析 | 近十年运营里程数据、时间轴数据、客运强度排名表格 |
| 统计版界面 | P5-统计部2 | 性能指标分析 | 高峰小时最小发车间隔、运营服务时长、全自动运行线路数据、能耗与排放数据 |
| 标准版界面 | P6-标准部 | 标准管理展示 | 标准化工作组织架构、制度管理、标准发布情况 |
| 文化版界面 | P7-文化和培训部-1 | 行业文化展示 | 文化博览会信息、行业庆典活动、文化建设成果 |
| 评审版界面 | P10-评审部 | 职称评审管理 | 历年职称评审数据、专业占比、地域分布、评审通过率 |
| 科技奖界面 | P12-科技进步奖大屏 | 科技成果展示 | 科技进步奖简介、历年申报情况、获奖数据分析、申报单位分布 |

**大屏界面详细说明**：

1. **P1-日常**：日常运营监控界面，展示城市信息、当前日期和天气状况，为用户提供基础信息参考。

2. **P2-协会简介**：包含协会简介文本、组织架构图、发展历程时间线和会员单位概况，全面展示协会的基本情况。

3. **P3-行业统计**：展示"2024年行业信息统计"，包含运营线路城市群分布（京津冀24%、珠三角27%等）、全国轨道交通统计数据（59个城市、12160.77公里总里程、361条线路等）。

4. **P4-统计部1**：展示近十年运营里程数据、2015-2024年时间轴数据、客运强度排名表格（广州1号线4.51、广州2号线3.49等前五线路数据）。

5. **P5-统计部2**：展示高峰小时最小发车间隔、线网平均运营服务时长、全自动运行线路数据（23个城市、54条线路、1484.43公里）、2023-2024年电能耗与CO2排放对应表。

6. **P6-标准部**：展示标准化工作组织架构、11项制度名称及对应排名和发布时间（如"团体标准管理办法"2017.3首次发布、2020.5修订）。

7. **P7-文化和培训部-1**：展示文化相关活动信息，包括"首届中国城市轨道交通文化博览会"、"中国地铁运营50周年系列活动 · 2019年"等文化活动描述。

8. **P10-评审部**：展示职称评审相关数据，包括历年职称评审申报各专业占比人数、地域分布，以及评审介绍文本（2019年获授权开展评审工作，2024年获正高级职称评审资格，累计2897人申报，1752人通过）。

9. **P12-科技进步奖大屏**：展示科技进步奖相关数据，包括2018~2024年度申报项目数量、申报项目单位主要分布、科技进步奖简介（2018年设立，七年评奖，828项申报，209项获奖）和2018-2024年申报数量与单位数据。

---

## 6. 数据模型设计

### 6.1 背景墙信息表（background_wall_info）

| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 背景墙ID |
| name | VARCHAR(255) | NOT NULL | 背景墙名称 |
| image_url | VARCHAR(500) | NOT NULL | 背景图片URL |
| image_size | VARCHAR(50) | NOT NULL | 图片尺寸（宽x高） |
| status | INTEGER | DEFAULT 1 | 状态（1-启用，0-禁用） |
| create_time | DATETIME | NOT NULL | 创建时间 |
| create_user | VARCHAR(50) | NOT NULL | 创建人 |
| update_time | DATETIME | NOT NULL | 更新时间 |
| update_user | VARCHAR(50) | NOT NULL | 更新人 |

### 6.2 宣传语配置表（slogan_config）

| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 配置ID |
| background_wall_id | VARCHAR(36) | NOT NULL, FOREIGN KEY | 所属背景墙ID |
| content | TEXT | NOT NULL | 宣传语内容 |
| text_align | VARCHAR(20) | DEFAULT 'center' | 文字对齐方式（left/center/right） |
| font_family | VARCHAR(50) | DEFAULT '微软雅黑' | 字体 |
| font_size | INTEGER | DEFAULT 24 | 字体大小 |
| font_color | VARCHAR(20) | DEFAULT '#FFFFFF' | 文字颜色 |
| stroke_color | VARCHAR(20) | DEFAULT '#000000' | 描边颜色 |
| stroke_width | INTEGER | DEFAULT 2 | 描边宽度 |
| update_time | DATETIME | NOT NULL | 更新时间 |

### 6.3 大屏信息表（screen_info）

| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 大屏ID |
| name | VARCHAR(255) | NOT NULL | 大屏名称 |
| screen_type | VARCHAR(50) | NOT NULL | 大屏类型（日常版、协会版等） |
| screen_id | VARCHAR(50) | | 界面ID（如P1-日常、P2-协会简介等） |
| refresh_interval | INT | NOT NULL DEFAULT 30 | 刷新间隔（秒） |
| maintenance_user | VARCHAR(50) | NOT NULL | 维护人 |
| maintenance_time | DATETIME | NOT NULL | 维护时间 |
| create_time | DATETIME | NOT NULL | 创建时间 |
| create_user | VARCHAR(50) | NOT NULL | 创建人 |
| status | INTEGER | DEFAULT 1 | 状态（1-启用，0-禁用） |

### 6.2 模块数据表（module_data）

| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | BIGINT | PRIMARY KEY AUTO_INCREMENT | 记录ID |
| screen_id | VARCHAR(36) | NOT NULL, FOREIGN KEY | 所属大屏ID |
| module_type | VARCHAR(50) | NOT NULL | 模块类型（新闻类、列表类、统计图表类、城市信息类、科技奖类等） |
| module_key | VARCHAR(50) | NOT NULL | 模块标识 |
| data | JSON | NOT NULL | 模块数据 |
| update_time | DATETIME | NOT NULL | 更新时间 |
| update_user | VARCHAR(50) | NOT NULL | 更新人 |
| import_batch_id | VARCHAR(100) | NULL | Excel导入批次ID |
| import_time | DATETIME | NULL | Excel导入时间 |

### 6.3 大屏特定数据模型扩展

基于Figma设计的8种大屏界面，针对不同界面类型增加以下扩展字段：

1. **协会简介类大屏**
   - organization_structure: JSON - 组织架构数据
   - development_history: Array - 发展历程数据
   - member_units: JSON - 会员单位概况

2. **统计图表类大屏**
   - chart_data: JSON - 图表数据
   - year_range: String - 年份范围
   - statistics_summary: JSON - 统计摘要信息

3. **科技奖类大屏**
   - award_introduction: Text - 奖项简介
   - yearly_data: Array - 年度数据
   - organization_distribution: JSON - 申报单位分布数据

---

## 7. 业务流程设计

### 7.1 背景墙管理流程

```mermaid
graph TD
    A[登录系统] --> B[进入大屏运营模块]
    B --> C[选择背景墙管理]
    C --> D{选择操作}
    D -->|新建| E[填写背景墙名称]
    D -->|编辑| F[选择要编辑的背景墙]
    E --> G[上传背景图片]
    F --> G
    G --> H[编辑宣传语内容]
    H --> I[调整文字样式]
    I --> J[预览效果]
    J --> K[保存配置]
    K --> L{保存成功?}
    L --> |是| M[显示成功提示]
    L --> |否| N[显示错误提示]
    M --> O[返回背景墙列表]
    N --> I
```

### 7.2 大屏内容维护流程

```mermaid
graph TD
    A[登录系统] --> B[进入大屏列表页]
    B --> C[搜索/选择大屏]
    C --> D[点击配置按钮]
    D --> E{选择大屏类型}
    E -->|P1-日常| E1[编辑日常版内容]
    E -->|P2-协会简介| E2[编辑协会简介内容]
    E -->|P3-行业统计| E3[编辑行业统计内容]
    E -->|P4-统计部1| E4[编辑统计部1内容]
    E -->|P5-统计部2| E5[编辑统计部2内容]
    E -->|P6-标准部| E6[编辑标准部内容]
    E -->|P7-文化和培训部-1| E7[编辑文化和培训部内容]
    E -->|P10-评审部| E8[编辑评审部内容]
    E -->|P12-科技进步奖大屏| E9[编辑科技进步奖内容]
    E1 --> F[编辑基础信息]
    E2 --> F
    E3 --> F
    E4 --> F
    E5 --> F
    E6 --> F
    E7 --> F
    E8 --> F
    E9 --> F
    F --> G[编辑子模块内容]
    G --> H{是否需要同步?}
    H --> |是| I[点击同步按钮]
    H --> |否| J[完成维护]
    I --> J
```

### 7.3 大屏创建流程

```mermaid
graph TD
    A[进入大屏列表页] --> B[点击新建按钮]
    B --> C{选择大屏类型}
    C -->|日常版| D1[设置P1-日常配置]
    C -->|协会版| D2[设置P2-协会简介配置]
    C -->|行业版| D3[设置P3-行业统计配置]
    C -->|统计版| D4[设置P4-统计部1配置]
    C -->|统计版| D5[设置P5-统计部2配置]
    C -->|标准版| D6[设置P6-标准部配置]
    C -->|文化版| D7[设置P7-文化和培训部-1配置]
    C -->|评审版| D8[设置P10-评审部配置]
    C -->|科技奖版| D9[设置P12-科技进步奖配置]
    D1 --> E[填写大屏名称]
    D2 --> E
    D3 --> E
    D4 --> E
    D5 --> E
    D6 --> E
    D7 --> E
    D8 --> E
    D9 --> E
    E --> F[设置维护人]
    F --> G[设置刷新间隔]
    G --> H[点击保存]
    H --> I{保存成功?}
    I --> |是| J[显示成功提示]
    I --> |否| K[显示错误提示]
    J --> L[返回大屏列表]
    K --> B
```

---

## 8. 交互设计规范

### 8.1 界面布局
- 顶部导航栏：系统名称、用户信息、退出按钮
- 左侧菜单栏：功能模块导航
- 主内容区：功能操作区域
- 右侧面板：（可选）辅助信息展示

### 8.2 操作反馈
- 成功提示：绿色提示信息，自动消失
- 错误提示：红色提示信息，需用户确认
- 加载状态：显示加载动画，禁用相关操作

### 8.3 表单设计
- 表单项布局：左标签右输入
- 验证反馈：实时验证，错误提示在对应字段下方
- 必填项标识：红色星号

### 8.4 大屏类型特定交互
- **日常版界面(P1)**: 提供城市信息快速编辑功能
- **协会版界面(P2)**: 支持组织架构图可视化配置
- **行业版界面(P3)**: 提供行业数据统计图表配置
- **统计版界面(P4/P5)**: 支持多维度数据对比和时间范围选择
- **标准版界面(P6)**: 提供标准发布状态管理
- **文化版界面(P7)**: 支持活动信息和文化内容管理
- **评审版界面(P10)**: 提供评审数据和结果可视化编辑
- **科技奖界面(P12)**: 支持年度数据和获奖信息管理

---

## 9. 异常处理机制

### 9.1 异常类型

| 异常类型 | 处理方式 |
|---------|---------|
| 输入验证异常 | 显示详细错误信息，引导用户修正 |
| 网络异常 | 显示网络错误提示，提供重试按钮 |
| 服务器异常 | 显示通用错误提示，记录详细日志 |
| 权限异常 | 跳转到无权限提示页或禁用相关操作 |
| 图表数据格式错误 | 提示数据格式问题，提供示例 |
| 大屏类型选择错误 | 提示选择正确的大屏类型 |
| 文件上传失败 | 提示上传失败原因，限制文件大小和格式 |

### 9.2 日志记录
- 操作日志：记录用户的关键操作
- 错误日志：记录系统错误信息
- 审计日志：记录敏感操作信息

---

## 9.3 容错机制
- **自动保存**：在配置过程中，系统每30秒自动保存一次配置，避免用户数据丢失
- **数据验证**：对用户输入的数据进行严格验证，确保数据的合法性和完整性
- **错误日志**：记录所有操作日志和错误信息，便于问题排查和系统优化
- **恢复机制**：在系统出现异常时，提供数据恢复功能，确保数据安全

---

## 10. 性能要求

1. **响应时间**：大屏列表页面加载时间不超过2秒，配置页面加载时间不超过3秒。
2. **并发支持**：系统应支持至少10个用户同时进行大屏配置操作。
3. **数据刷新**：支持实时数据刷新，刷新间隔可配置（最小5秒，最大3600秒）。
4. **大屏展示**：大屏展示页面应保证流畅运行，无卡顿现象。
5. **资源占用**：系统运行时CPU占用率不超过30%，内存占用率不超过50%。

## 11. 安全要求

1. **身份认证**：系统应实现基于角色的访问控制（RBAC），不同角色具有不同的操作权限。
2. **数据加密**：敏感数据在传输和存储过程中应进行加密处理。
3. **操作审计**：记录所有用户操作日志，包括登录、查询、修改、删除等操作。
4. **防SQL注入**：对用户输入进行严格过滤，防止SQL注入攻击。
5. **防XSS攻击**：对用户输入的内容进行转义处理，防止跨站脚本攻击。
6. **会话管理**：实现安全的会话管理机制，包括会话超时、会话失效等。

## 12. 可扩展性要求

1. **模块化设计**：系统应采用模块化设计，便于功能扩展和维护。
2. **接口标准化**：提供标准化的API接口，便于与其他系统集成。
3. **插件支持**：支持通过插件方式扩展系统功能，如新增图表类型、新增数据源等。
4. **配置化设计**：核心功能参数应支持配置化，无需修改代码即可调整系统行为。

---

## 10. 性能要求

### 10.1 响应时间
- 页面加载：≤3秒
- 数据保存：≤1秒
- 搜索筛选：≤1秒

### 10.2 并发支持
- 支持100人同时在线操作
- 支持20人同时编辑不同大屏内容

---

## 11. 安全要求

### 11.1 数据安全
- 敏感数据加密存储
- 数据传输使用HTTPS加密
- 定期数据备份

### 11.2 访问控制
- 基于角色的权限管理
- 登录超时自动退出
- 关键操作需要二次确认

### 11.3 等保三级要求
- 满足国家网络安全等级保护三级要求
- 定期安全审计和漏洞扫描
- 完善的安全管理制度

---

## 12. 扩展性设计

### 12.1 功能扩展
- 模块化设计，便于新增功能
- 预留接口，支持第三方系统集成

### 12.2 数据扩展
- 支持新增模块类型
- 灵活的数据结构设计，适应未来需求变化

### 12.3 性能扩展
- 数据库索引优化
- 支持水平扩展部署


