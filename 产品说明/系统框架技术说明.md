# 人民城轨2.0系统框架技术说明

## 一、前端框架

### 1. 核心框架
- **React 17.0.2**：系统采用React作为核心前端框架，用于构建用户界面和管理组件状态
- **React DOM 17.0.2**：用于将React组件渲染到DOM中

### 2. UI组件库
- **Ant Design (antd) 4.24.15**：企业级UI组件库，提供丰富的组件支持
- **组件覆盖**：包括布局组件(Layout)、表单组件(Form)、表格组件(Table)、导航组件(Menu)、弹窗组件(Modal)等

## 二、数据处理与可视化

### 1. 数据可视化
- **ECharts 5.4.3**：强大的数据可视化图表库，用于创建运营数据统计图表

### 2. 日期时间处理
- **Moment.js 2.29.4**：用于处理日期时间格式化、计算和解析

## 三、项目架构

### 1. 模块化设计
- **功能模块化**：按功能划分为工具类、组件和页面组件
- **命名空间**：使用全局对象`window.App`组织代码，分为：
  - `App.utils`：工具类
  - `App.components`：通用组件
  - `App.pages`：页面组件

### 2. 状态管理
- **自定义StateManager**：全局状态管理器，处理系统状态、通知和数据共享

### 3. 权限管理
- **自定义PermissionManager**：权限控制系统，管理用户权限和访问控制

### 4. 认证管理
- **自定义AuthUtils**：处理用户登录、认证和会话管理

### 5. 本地存储
- **localStorage**：用于存储用户数据和认证令牌

## 四、项目构建与部署

### 1. 开发环境
- **http-server 14.1.1**：本地开发服务器，用于快速启动项目

### 2. 依赖管理
- **npm**：使用npm管理项目依赖
- **自定义下载脚本**：`download-deps.js`用于下载第三方依赖到本地

### 3. 部署方式
- **GitHub Pages**：使用`gh-pages`工具(6.1.1)部署到GitHub Pages
- **静态文件部署**：项目为静态文件结构，可部署到任意Web服务器

## 五、开发工具与测试

### 1. 测试框架
- **Playwright 1.56.1**：用于端到端测试

### 2. 代码组织
- **原生JavaScript**：使用原生JavaScript开发，未使用TypeScript
- **无构建工具**：直接使用原生JavaScript和HTML，未使用Webpack、Vite等构建工具

## 六、系统核心功能模块

### 1. 管理功能
- 运营统计(OperationalStats)
- 仪表盘(Dashboard)
- 大屏管理(ScreenManagement)
- 内容管理(ContentManagement)
- 投诉管理(ComplaintManagement)
- 直播管理(LiveManagement)
- 展会管理(ExhibitionManagement)
- AI管理(AIAgentManagement)

### 2. 系统功能
- 用户管理(UserManagement)
- 日志管理(LogManagement)
- 系统设置(SystemSettings)
- 菜单管理(MenuManagement)
- 个人中心(PersonalCenter)

## 七、技术特点

### 1. 优点
- **轻量级架构**：无需构建工具，便于快速开发和部署
- **组件化设计**：代码结构清晰，便于维护和扩展
- **响应式布局**：支持不同屏幕尺寸
- **模块化状态管理**：自定义状态管理器提供灵活的数据共享
- **完善的权限控制**：细粒度的权限管理系统

### 2. 技术局限性
- **无构建工具**：无法利用代码分割、Tree Shaking等优化
- **原生JavaScript**：缺乏TypeScript的类型安全
- **全局对象依赖**：使用全局对象组织代码，缺乏模块隔离
- **React 17**：不是最新版本，缺少React 18的新特性

## 八、浏览器兼容性

- 支持现代浏览器(Chrome、Firefox、Safari、Edge)
- 依赖React和Ant Design的浏览器兼容性

## 九、未来技术演进方向

1. **升级React版本**：迁移到React 18+，利用并发特性
2. **引入TypeScript**：提高代码质量和可维护性
3. **使用构建工具**：引入Vite或Webpack，实现代码优化和打包
4. **状态管理优化**：考虑使用Redux Toolkit或Recoil替代自定义状态管理
5. **组件库升级**：升级到Ant Design 5+，利用新组件和特性
6. **API集成**：与后端API进行集成，替换mock数据

---

**更新日期**：2024年
**文档版本**：1.0